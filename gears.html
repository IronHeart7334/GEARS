<!DOCTYPE html>
<html>
    <head>
        <title> GEARS </title>
        <meta name="Creator" content="Matt Crow">
        <style>
            div {
                border-style: groove;
                border-width: 10px;
            }
            #header {
                position:absolute;
                left:100px;
                top:100px;
                width:1000px;
                height:100px;
                text-align: center;
            }
            #game {
                position:absolute;
                left:100px;
                top:220px;
                width:700px;
                height:700px;
            }
            #button {
                position:absolute;
                left:1120px;
                top:1120px;
                width:100px;
                height:100px;
                text-align: center;
            }
            #description {
                position:absolute;
                left:100px;
                top:1240px;
                width:1000px;
                height:250px;
            }
            #controls {
                position:absolute;
                left:1120px;
                top:220px;
                width:100px;
                height:880px;
                text-align: center;
            }
        </style>
        
        <script>
        	// Variable globalization
        	var base_canvas;
        	var canvas;
        	var game_timer;
        	var timer_started;
        	var pressed_key;
        	
        	// Variables
        	var FPS = 60;
        	var zoom_scale = 1;
        	var canvas_size = 700;
        	var block_size = canvas_size / 10;
        	var GRAVITY = block_size / 10;
        	var camera_shift = [canvas_size / 2, canvas_size * 0.67];
        	var POWER_MULT = FPS * 300;
        	
        	function load_page() {
            	var body = document.getElementById("body");
            	var fresh_canvas = document.createElement("canvas");
            	fresh_canvas.id = "canvas";
            	fresh_canvas.width = canvas_size;
            	fresh_canvas.height = canvas_size;
            	fresh_canvas.style.position = "absolute";
            	fresh_canvas.style.top = "230px";
            	fresh_canvas.style.left = "110px";
            	body.appendChild(fresh_canvas);
            	base_canvas = document.getElementById("canvas");
			    canvas = base_canvas.getContext("2d");
			    
			    /*
			    var header = document.createElement("h1");
			    header.id = "header";
			    header.width = canvas_size;
			    header.height = canvas_size / 5;
			    header.style.border = "thick solid blue";
			    body.appendChild(header);
			    */
			    
			    var header = document.getElementById("header");
			    
			    header.width = canvas_size;
			    console.log(header);
			    
            }
        	
        	// Camera functions
        	function pause() {
        		clearInterval(game_timer);
        		timer_started = false;
        	}
        	
        	function resume() {
        		game_timer = setInterval(update_frame, 1000 / FPS);
        		timer_started = true;
        	}
        	
        	// This needs fixing
        	function zoom(mode) {
        		
        		if (mode == "in") {
        			zoom_scale -= 1;
        		}
        		else if (mode == "out") {
        			zoom_scale += 1;
        		}
        		if (zoom_scale > 3){
        			zoom_scale = 3;
        		}
        		if (zoom_scale < -3){
        			zoom_scale = -3;
        		}
        		
        		var zoom_amount = 1 + zoom_scale * 0.05;
        		console.log(zoom_amount);
        		canvas.scale(zoom_amount, zoom_amount);
        	}
        	
        	function update_camera() {
        		canvas.save();
        		var x_shift = -player.x + camera_shift[0];
        		var y_shift = -player.y + camera_shift[1];
				
				// left
        		if (x_shift > 0){
        			x_shift = 0;
        		}
        		
        		// right
        		if (x_shift < canvas_size - current_level.longest_row * block_size) {
        			x_shift = canvas_size - current_level.longest_row * block_size;
        		}
        		
        		// top
        		if (y_shift > 0){
        			y_shift = 0;
        		}
        		
        		// bottom
        		if (y_shift < canvas_size - current_level.height * block_size){
        			y_shift = canvas_size - current_level.height * block_size;
        		}
        		
        		canvas.translate(x_shift, y_shift);
        	}
        	
        	function reset_camera() {
        		canvas.restore();
        	}
        	
        		
        	
        	// Colors
        	// rename these        	
        	var color1 = "rgb(150, 50, 0)";
            var color2 = "rgb(35, 100, 0)";
            var color3 = "rgb(175, 175, 255)";
            var energy_color = "rgb(155, 255, 0)";
            
        	function silver(value) {
                if (value > 10) {
                    value = 10;
                }
                shade = value * 25;
                return "rgb(" + shade + ", " + shade + ", " + shade + ")";
            }
            
            function gold(value) {
                if (value > 10) {
                    value = 10;
                }
                shade = value * 25;
                return "rgb(" + shade + ", " + shade + ", " + 0 + ")";
            }
            
            var block_colors = [
            	[gold(4), color1],
            	[color1, color2],
            	[silver(8), color3],
            	[silver(4), silver(9)],
            	[silver(3), silver(4)],
            	[gold(4), gold(9)]
            ];

			function draw_gear(x, y, size, color, rotated){
				var gear1 = [
					[1, 0, 1, 0, 1],
					[0, 1, 1, 1, 0],
					[1, 1, 0, 1, 1],
					[0, 1, 1, 1, 0],
					[1, 0, 1, 0, 1]
				];
				
				var gear2 = [
					[0, 1, 0, 1, 0],
					[1, 1, 1, 1, 1],
					[0, 1, 0, 1, 0],
					[1, 1, 1, 1, 1],
					[0, 1, 0, 1, 0]
				];
				
				if (!rotated){
					var gear_map = gear1;
				}
				
				if (rotated){
					var gear_map = gear2;
				}
				
            	canvas.fillStyle = color;
				
				for (var row = 0; row < gear_map.length; row++) {
            			for (var column = 0; column < gear_map[row].length; column++){
            				if (gear_map[row][column] != 0){
            					canvas.fillRect(x + size * row, y + size * column, size, size);
            				}	
            			}
            		}
			}



            // Class constructors
            function Block(c, x, y, can_hit) {
            	this.c = c;
            	this.x = x * block_size;
            	this.y = y * block_size;
            	this.can_hit = can_hit;
            }
        	
        	// this can be improved
            function Level(name, colors, level_data, start) {
            	this.name = name;
            	this.colors = colors;
            	this.level_data = level_data;
            	this.current_map_number = start[0];
            	this.start_coords = [start[1], start[2]];
            }
            
            function Jump(name, x_mom, y_mom, color){
            	this.name = name;
            	this.x_mom = x_mom;
            	this.y_mom = y_mom;
            	this.color = color;
            }
            
            function Player() {
            	this.x_mom = 0;
            	this.y_mom = 0;
            	this.arm_shift = 0;
            	this.showHUD = true;
            	
            	this.magnetic = true;
            	
            	// values 3-7
            	this.power_capacity = 5;
    			this.speed = 5;
    			this.power_consumption = 5;
            }
            
            // Machine Classes
            function Gear(x, y, jump){
            	this.x = x * block_size + block_size / 2;
            	this.y = y * block_size + block_size / 2;
            	this.jump = jump;
            	this.rotated = false;
            }
            
            function Generator(x, y) {
        		this.x = x * block_size;
        		this.y = y * block_size;
        	}
        	
        	function Door(x, y) {
        		this.x = x * block_size;
        		this.y = y * block_size;
        		this.powered = false;
        	}
        	
        	function Belt(x, y, width, direction, speed, auto_on){
        		this.x = x * block_size;
        		this.y = y * block_size;
        		this.width = width * block_size;
        		this.direction = direction;
        		this.speed = speed;
        		this.auto_on = auto_on;
        	}
        	
        	function Tram(x, y, destinations, auto_on){
        		this.x = x * block_size;
        		this.y = y * block_size;
        		this.auto_on = auto_on;
        		this.destinations = [];
        		for (dest of destinations){
        			this.destinations.push([dest[0] * block_size, dest[1] * block_size]);
        		}
        		this.destinations.push([this.x, this.y]);
        		this.dest_num = 0;
        		this.ready = true;
        		this.moving = false;
        	}
        	
        	// not finished
        	function Train(x, y, width, gears){
        		this.x = x * block_size;
        		this.y = y * block_size;
        		this.width = width * block_size;
        		this.gears = gears;
        	}
            
            
            
            // Class methods
            Block.prototype = {
            	
            	draw:function(){
            		var shift = block_size / 10;
            		canvas.fillStyle = this.c[0];
				    canvas.fillRect(this.x, this.y, block_size, block_size);
				    if (!this.can_hit){return};
				    canvas.fillStyle = this.c[1];
				    canvas.fillRect(this.x + shift, this.y + shift, block_size - shift * 2, block_size - shift * 2);	
            	},
            	
            	top_coll:function(object) {
            		if (object.x + 1 > this.x && object.x - 1 < this.x + block_size && object.y + block_size / 2 >= this.y && object.y + block_size / 2 < this.y + block_size){
            			object.falling = false;
            			object.y = this.y - block_size / 2;
            		}
            	},
            	
            	bottom_coll:function(object){
            		if (object.x > this.x && object.x < this.x + block_size && object.y - block_size / 2 > this.y && object.y - block_size / 2 < this.y + block_size){
            			object.y = this.y + block_size * 1.5;
            		} 
            	},
            	
            	left_coll:function(object) {
            		while (object.y >= this.y && object.y <= this.y + block_size && object.x >= this.x + block_size && object.x <= this.x + block_size * 1.5){
            			object.x += 1;
            		}
            	},
            	
            	right_coll:function(object) {
            		while (object.y >= this.y && object.y <= this.y + block_size && object.x + block_size / 2 >= this.x && object.x <= this.x + block_size / 2){
            			object.x -= 1;
            		}
            	}	
            }
            
            Level.prototype = {
            	
            	load_map:function(){
            	    this.blocks = [];
            		this.current_map = this.level_data[this.current_map_number][0];
            		this.longest_row = 0;
            		this.height = this.current_map.length;
            		this.height_in_px =  this.height * block_size;
            		for (var row = 0; row < this.current_map.length; row++) {
            			for (var column = 0; column < this.current_map[row].length; column++){
            				
            				if (this.current_map[row].length > this.longest_row){
            					this.longest_row = this.current_map[row].length;
            				} 
            				
            				if (this.current_map[row][column] != 0){
            					this.blocks.push(new Block(this.colors[this.current_map[row][column] - 1], column, row, true));
            				}	
            			}
            		}
            	},
            	
            	load_foreground:function(){
            		this.foreground_blocks = [];
            		this.current_map = this.level_data[this.current_map_number][1];
            		this.longest_row = 0;
            		this.height = this.current_map.length;
            		for (var row = 0; row < this.current_map.length; row++) {
            			for (var column = 0; column < this.current_map[row].length; column++){
            				
            				if (this.current_map[row].length > this.longest_row){
            					this.longest_row = this.current_map[row].length;
            				} 
            				
            				if (this.current_map[row][column] != 0){
            					this.foreground_blocks.push(new Block(this.colors[this.current_map[row][column] - 1], column, row, false));
            				}	
            			}
            		}
            	},
            	
            	load_machines:function() {
            		this.machines = [];
            		this.current_machines = this.level_data[this.current_map_number][2];
            		for (machine of this.current_machines) {
            			this.machines.push(machine);
            		}
            	},
            	
            	load:function() {
            		this.load_map();
            		this.load_foreground();
            		this.load_machines();
            	},
            	
            	add_energy:function(x, y) {
            		for (coord_set of this.energy){
            			if (coord_set[0] == x && coord_set[1] == y){return;}
            		}
            		this.energy.push([x, y]);
            	},
            	
            	check_energy:function(machine) {
            		machine.powered = false;
            		for (coord_set of this.energy){
            			if (coord_set[0] == machine.x - block_size && coord_set[1] == machine.y){
            				machine.powered = true;
            				break;
            			}
            		}
            	},
            	
            	check_coll:function(object) {
            		for (block of this.blocks){
            			block.top_coll(object);
            			block.bottom_coll(object);
            			block.left_coll(object);
            			block.right_coll(object);
            		}
            	},
            	
            	update_machines:function() {
            		this.energy = [];
            		for (machine of this.machines) {
            			this.check_energy(machine);
            			machine.update();
            		}
            	},
            	
            	draw_map:function() {
            		for (var block of this.blocks){
            			block.draw();
            		}
            	},
            	
            	draw_foreground:function() {
            		for (var block of this.foreground_blocks){
            			block.draw();
            		}
            	},
            	
            	draw_machines:function() {
            		for (machine of this.machines){
            			machine.draw();
            		}
            	},
            	
            	draw:function() {
            		this.draw_foreground();
            		this.draw_machines();
            		this.draw_map();
            	},
            	
            	check_for_area:function(){
            	
            		if (player.x < block_size / 2) {
            		
            			if (this.current_map_number > 0){
            				this.current_map_number -= 1;
            				this.load();
            				player.x = this.longest_row * block_size - block_size / 2;
            				player.spawn_coords = [player.x, player.y];
            			} 
            		}
            		
            		if (player.x > this.longest_row * block_size) {
            			if (this.current_map_number < this.level_data.length - 1){
            				this.current_map_number += 1;
            				this.load();
            				player.x = block_size / 2;
            				player.spawn_coords = [player.x, player.y];
            			} 
            		}
            	},
            	
            	update:function() {
            		this.check_for_area();
            		this.check_coll(player);
            		this.update_machines();
            	},
            	
            	run:function() {
            		player.load(this.start_coords[0], this.start_coords[1]);
            	}
            }
            
            Player.prototype = {
            	load:function(x, y){
            		this.x = x;
            		this.y = y;
            		this.spawn_coords = [x, y];
            		this.facing = "right";
            		this.gears = ["none"];
            		this.current_gear = 0;
            		this.gear_count = 0;
            		this.power = this.power_capacity * POWER_MULT;
            	},
            	
            	reset_x_mom:function() {
            		this.x_mom = 0;
            	},
            	
            	reset_y_mom:function() {
            		this.y_mom = 0;
            	},
            	
            	reset_mom:function() {
            		this.reset_x_mom();
            		this.reset_y_mom();
            	},
            	
            	respawn:function() {
            		this.x = this.spawn_coords[0];
            		this.y = this.spawn_coords[1];
            	},
            	
            	fall:function() {
            		if(this.falling){
            			this.y_mom += GRAVITY;
            		}
            	},
            	
            	move_left:function() {
            		this.x_mom = -(block_size / 20 * this.speed);
            		this.facing = "left";
            		this.power -= this.power_consumption;
            	},
            	
            	move_right:function() {
            		this.x_mom = block_size / 20 * this.speed;
            		this.facing = "right";
            		this.power -= this.power_consumption;
            	},
            	
            	obtain_gear:function(gear) {
            		for (g of this.gears){
            			if (g == gear) {
            				return;
            			}
            		}
            		this.gears.push(gear);
            	},
            	
            	shift_gear:function() {
            		if (this.current_gear < this.gears.length - 1){
            			this.current_gear ++;
            		} else {this.current_gear = 0;}
            	},
            	
            	jump:function() {
            		if (this.falling){return;}
            		if (this.gears[this.current_gear] != "none") {
            			if (this.facing == "left"){
            				this.x_mom -= block_size * this.gears[this.current_gear].x_mom;
            			}
            			if (this.facing == "right"){
            				this.x_mom += block_size * this.gears[this.current_gear].x_mom;
            			}
            			this.y_mom -= block_size * this.gears[this.current_gear].y_mom;
            		} else {console.log("no gear");}
            	},
            	
            	update:function() {
            		this.fall();
            		this.x += this.x_mom;
            		this.y += this.y_mom;
            		this.falling = true;
            		this.reset_mom();
            		
            		if(this.y >= current_level.height_in_px){
            			this.respawn();
            		}
            	},
            	
            	draw_torso:function() {
            		var torso_size = block_size * 0.5;
            		
            		canvas.fillStyle = silver(5);
            		if (this.facing == "left"){
            			canvas.fillRect(this.x, this.y - torso_size / 2, torso_size, torso_size);
            		}
            		if (this.facing == "right"){
            			canvas.fillRect(this.x - block_size / 2, this.y - torso_size / 2, torso_size, torso_size);
            		}
            		
            	},
            	
            	draw_treads:function(){
            		var tread_shift = 20;
            		var treadY = this.y + tread_shift;
            		var tread_width = block_size;
            		
            		canvas.fillStyle = "rgb(0, 0, 0)";
            		canvas.beginPath();
            		canvas.moveTo(this.x, treadY);
            		canvas.lineTo(this.x - tread_width / 2, this.y + block_size / 2);
            		canvas.lineTo(this.x + tread_width / 2, this.y + block_size / 2);
            		canvas.fill();
            	},
            	
            	draw_arms:function(){
            		canvas.fillStyle = silver(7);
            		if (this.facing == "left"){
            			canvas.fillRect(this.x + this.arm_shift, this.y, -block_size / 3, block_size / 5);
            		}
            		if (this.facing == "right"){
            			canvas.fillRect(this.x + this.arm_shift, this.y, block_size / 3, block_size / 5);
            		}
            	},
            	
            	draw_head:function(){
            		canvas.fillStyle = silver(6);
            		canvas.fillRect(this.x - block_size / 4, this.y - block_size / 2, block_size / 2, block_size / 4);
            	},
            	
            	draw_hitbox:function(){
            		canvas.fillStyle = "rgb(255, 255, 255)";
            		canvas.fillRect(this.x - block_size / 2, this.y - block_size / 2, block_size, block_size);
            	},
            	
            	draw:function() {
            		//this.draw_hitbox();
            		
            		this.draw_torso();
            		this.draw_treads();
            		this.draw_arms();
            		this.draw_head();
            	},
            	
            	show_gear:function() {
            	    if (this.gears[this.current_gear] == "none"){return};
            	    draw_gear(canvas_size * 0.025, canvas_size * 0.925, 10, this.gears[this.current_gear].color, false);  
            	},
            	
            	show_power:function() {
            		canvas.fillStyle = silver(7);
            		canvas.beginPath();
            		canvas.arc(canvas_size * 0.25, canvas_size * 0.95, canvas_size / 40, 0, 2 * Math.PI);
            		canvas.fill();
            		
            		canvas.fillStyle = silver(7);
            		canvas.beginPath();
            		canvas.arc(canvas_size * 0.75, canvas_size * 0.95, canvas_size / 40, 0, 2 * Math.PI);
            		canvas.fill();
            		
            		canvas.fillStyle = energy_color;
            		canvas.fillRect(canvas_size * 0.25, canvas_size * 0.925, (this.power / (this.power_capacity * POWER_MULT)) * canvas_size / 2, canvas_size / 20);
            	},
            	
            	drawHUD:function() {
            		if (this.showHUD){
            			this.show_gear();
            			this.show_power();
            		}
            	},
            	
            	reset_arm:function() {
            		this.arm_shift = 0;
            	}	
            }

			// Machine methods
			Gear.prototype = {
            	draw:function(){
            		if (this.jump == "none"){
            			this.jump.color = silver(7);
            		}
            		draw_gear(this.x - block_size / 4, this.y - block_size / 4, block_size / 10, this.jump.color, this.rotated);
            	},
            	
            	update:function(){
            		/*
            		if (this.rotated){
            			this.rotated = false;	
            		}
            		if (!this.rotated){
            			this.rotated = true;
            		}
            		*/
            		if (player.x >= this.x - block_size / 2 && player.x <= this.x + block_size / 2 && player.y >= this.y - block_size / 2 && player.y <= this.y + block_size / 2) {
            			player.obtain_gear(this.jump);
						
						if (this.jump == "none"){
							player.gear_count ++;
						}
						
            			var to_remove = current_level.machines.indexOf(this);
            			current_level.current_machines.splice(to_remove, 1);
            			current_level.machines.splice(to_remove, 1);
            		}
            	}
            }
			
			Generator.prototype = {
            	draw:function() {
            		canvas.fillStyle = silver(7);
            		canvas.fillRect(this.x + block_size * 0.1, this.y - block_size, block_size * 0.8, block_size * 2);
            		
            		canvas.fillStyle = silver(4);
            		canvas.fillRect(this.x, this.y - block_size, block_size, block_size / 2);
            		canvas.fillRect(this.x, this.y + block_size / 2, block_size, block_size / 2);
            		
            		canvas.fillStyle = energy_color;
            		canvas.fillRect(this.x + block_size * 0.4, this.y - block_size / 2, block_size / 5, block_size);
            	},
            	
            	update:function() {
            		current_level.add_energy(this.x + block_size, this.y);
            	}
            }
            
            Door.prototype = {
            	check_coll:function(object) {
            		while (object.y >= this.y && object.y <= this.y + block_size && object.x >= this.x + block_size && object.x <= this.x + block_size * 1.5){
            			object.x += 1;
            		}

            		while (object.y >= this.y && object.y <= this.y + block_size && object.x + block_size / 2 >= this.x && object.x <= this.x + block_size / 2){
            			object.x -= 1;
            		}
            	},
            	
            	draw:function() {
            		if (!this.powered){
            			canvas.fillStyle = silver(6);
            			canvas.fillRect(this.x + block_size / 10, this.y, block_size * 0.8, block_size);
            		
            			canvas.fillStyle = "rgb(0, 0, 0)";
            			canvas.fillRect(this.x + block_size / 10, this.y + block_size / 2, block_size * 0.8, 1);
            		}

            		canvas.fillStyle = silver(2);
            		canvas.fillRect(this.x, this.y, block_size, block_size / 10);
            		canvas.fillRect(this.x, this.y + block_size * 0.9, block_size, block_size / 10);
            	},
            	
            	update:function() {
            		if (!this.powered){
            			this.check_coll(player);
            		}
            	}
            	 
            }
            
            Belt.prototype = {
            	check_coll:function(object) {
            		if (object.x > this.x && object.x < this.x + this.width && object.y + block_size / 2 >= this.y && object.y + block_size / 2 < this.y + block_size){
            			object.falling = false;
            			object.y = this.y - block_size / 2;
            			
            			if (!this.auto_on && !this.powered){return;}
            			
            			if (this.direction == "left") {
            				object.x -= this.speed;
            			}
            			if (this.direction == "right") {
            				object.x += this.speed;
            			}
            		}
            	},
            	
            	draw:function() {
            		canvas.fillStyle = "rgb(0, 0, 0)";
            		canvas.fillRect(this.x, this.y, this.width, block_size / 2);
            		
            		canvas.fillStyle = silver(7);
            		canvas.beginPath();
            		canvas.arc(this.x, this.y + block_size / 4, block_size /4 , 0, 2 * Math.PI);
            		canvas.fill();
            		
            		canvas.beginPath();
            		canvas.arc(this.x + this.width, this.y + block_size / 4, block_size /4 , 0, 2 * Math.PI);
            		canvas.fill();
            	},
            	
            	update:function() {
            		this.check_coll(player);
            	}
            }
            
            Tram.prototype = {
            	draw:function(){
            		canvas.fillStyle = silver(7);
            		canvas.fillRect(this.x + block_size / 4, this.y, block_size / 2, block_size);
            		canvas.fillRect(this.x, this.y + block_size * 0.75, block_size, block_size / 4);
            		
            		if (!this.auto_on && !this.powered){return;}
            		
            		canvas.fillStyle = energy_color;
            		canvas.fillRect(this.x, this.y + block_size, block_size, block_size / 20);
            	},
            	
            	update:function(){
            		if (this.moving){
            			this.follow_path();
            			this.powered = true;
            		}
            		if (!this.powered && !this.auto_on){return;}
            		
            		if (!this.ready){return;}
            		
            		if (!player.magnetic){return;}
					
            		if (player.x >= this.x && player.x <= this.x + block_size && player.y > this.y + block_size * 1.5){
            			player.y -= GRAVITY;
            			player.falling = false;
            			if (player.y > this.y + block_size * 1.5){return;}
            			player.x = this.x + block_size / 2;
            			this.moving = true;
            		}
            	},
            	
            	follow_path:function(){
            		this.current_dest = this.destinations[this.dest_num];
            		
            		if (this.x > this.current_dest[0]){
            			this.x -= 5;
            		}
            		 if (this.x < this.current_dest[0]){
            			this.x += 5;
            		}
            		if (this.y > this.current_dest[1]){
            			this.y -= 5;
            		}
            		if (this.y < this.current_dest[1]){
            			this.y += 5;
            		}
            		else if (this.x == this.current_dest[0] && this.y == this.current_dest[1]){
            			this.dest_num ++;
            			if (this.dest_num + 1 == this.destinations.length){
            				this.ready = false;
            			}
            			if (this.dest_num == this.destinations.length){
            				this.dest_num = 0;
            				this.ready = true;
            				this.moving = false;
            			}
            		}
            	}
            }
            
            // not finished
            Train.prototype = {
            	draw:function(){
            		canvas.fillStyle = silver(4);
            		canvas.fillRect(this.x, this.y, this.width, block_size);
            		
            		for (gear of this.gears){
            			if (gear) {
            				draw_gear(this.x + this.gears.indexOf(gear) * block_size, this.y, block_size / 5, silver(2), true);
            			}
            		}
            	},
            	
            	update:function(){
            		return;
            	}
            }



			// Canvas functions
            function assign_color(changes) {
                for (var alter of changes) {
                    var change = document.getElementById(alter[0]);
                    change.style.background = alter[1];
                    change.style.borderColor = alter[2];     
                }
            }
            
            function load_game() {
            	// Got tired of seeing all this in the body section
            	// Change it later
            	assign_color([
    				['header', silver(8), silver(5)], 
        			['game', 'Black', gold(9)], 
        			['button', gold(5), gold(10)], 
        			['description', color3, silver(8)], 
        			['controls', silver(7), color2]
        		]);
            	//load_canvas();
            	current_level.load();
            	resume();
            }
            
            function register_key(key) {
            	pressed_key = key;
            }
            
            function check_key(key) {
            	if (key == null){return;}
            	//console.log(key.keyCode);
            	switch(key.keyCode){
            		
            		case 16: 
            			player.shift_gear();
            			break;
            			
            		case 32: 
            			player.jump();
            			break;
            			
            		case 37:
            			player.move_left();
            			break;
            			
            		case 38:
            			player.jump();
            			break;	
            			
            		case 39: 
            			player.move_right();
            			break;
            			
            		case 40: console.log("down");
            			break;
            			
            		case 65:
            			player.move_left();
            			break;
            			
            		case 68:
            			player.move_right();
            			break;
            		
            		case 72:
            			if (player.showHUD){
            				player.showHUD = false;
            			} else {player.showHUD = true;}
            			break;
            			
            		case 80:
            			if (timer_started){
            				pause();
            			} else {resume();}
            			break;
            			
            		case 83: console.log("s");
            			break;
            			
            		case 87:
            			player.jump();
            			break;
            			
            		case 187:
            			zoom("out");
            			break;
            			
            		case 189:
            			zoom("in");
            			break;	
            	}
            }
            
            function update_frame() {
            	canvas.fillStyle = color3;
            	canvas.fillRect(0, 0, canvas_size, canvas_size);
            	
            	update_camera();
            	check_key(pressed_key);
            	
            	player.update();
            	current_level.update();
            	
            	current_level.draw();
            	player.draw();
            	
            	reset_camera();
            	
            	player.drawHUD();
            	
            	pressed_key = null;
            }
            
    
    
			var reg_jump = new Jump("Jump", 1.5, 1, color3);
            var far_jump = new Jump("Leap", 5, 0, color2);
            var high_jump = new Jump("Rocket", 0, 5, color1);


    
            // Temporary stuff
            
            var test_area = [
            	[
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 0, 0, 1, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[
            			new Gear(3, 5, reg_jump),
						new Gear(3, 2, far_jump),
						new Gear(19, 5, high_jump)
            		]
            	],
            	
            	[
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 0, 0, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]
            		],
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            		],
            		[
            			new Tram(1, -1, [], true),
            			new Tram(10, 1, [[17, 1]], true),
            			new Tram(10, 12, [], true),
            			new Tram(11, 12, [], true),
            			new Tram(12, 12, [], true),
            			new Tram(13, 12, [], true),
            			new Tram(14, 12, [], true),
            			new Tram(15, 12, [], true),
            			new Tram(16, 12, [], true),
            			new Tram(18, 4, [[9, 4]], true),
            			new Belt(3, 6, 3, "right", 5, true),
            			new Belt(4, 9, 3, "left", 5, true)
            		]
            	],
            	
            	[
            		[
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 2, 0]
            		],
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[
            			new Door(9, 3)
            		]
            	]
            ];
            
            var mountain = [
            	[
            		[
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[
            			[0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 1, 1, 1, 1, 1, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],	
            		],
            		[
            			new Gear(7, 6, far_jump)
            		]
            	],
            	
            	[
            		[
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[],
            		[]	
            	]
            ];
            
            var test_level = new Level("Test", [[silver(3), silver(5)], [gold(7), gold(9)], [energy_color, silver(8)]], test_area, [0, 150, 200]);
            var mountain_level = new Level("Mountain", [[silver(1), silver(2)], [], [], [], [], ["rgb(0, 100, 255)", "rgb(0, 100, 255)"]], mountain, [0, 300, 400]);
            
            var current_level = test_level;
            var player = new Player();
            current_level.run();
        </script>
    </head>
    
    <body onload="load_page(); assign_color([['header', silver(8), silver(5)], ['game', 'Black', gold(9)], ['button', gold(5), gold(10)], ['description', color3, silver(8)], ['controls', silver(7), color2]]);"; onkeydown="register_key(event)"; id="body">
        
        <div id="header">
            <h1>GEARS</h1>
            <i>Gear engine and robot sidescroller.</i>
        </div>
        
        <div id="game"></div>
        
        <div id="button" onclick="load_game()"> 
            <h1>Play</h1>
        </div>
        
        <div id="description">
        	<p> GEARS is a combination platformer/puzzle game in which the player, as a repair drone, must ______ _______ machines.</p>
        </div>
        
        <div id="controls">
        	<h2>Controls</h2>
        	
        	<h3>Up/W/Space</h3>
        	<p>Jump</p>
        	
        	<h3>Shift</h3>
        	<p>Change gears</p>
        	
        	<h3>Left/A:</h3>
        	<p>Move left</p>
        	
        	<h3>Right/D:</h3>
        	<p>Move right</p>
        	
        	<h3>H</h3>
        	<p>Toggle HUD</p>
        	
        	<h3>+</h3>
        	<p>Zoom in</p>
        	<i>Bugged</i>
        	
        	<h3>-</h3>
        	<p>Zoom out</p>
        	<i>Bugged</i>
        	
        	<h3>P</h3>
        	<p>Pause/unpause</p>
        	<i>Bugged</i>
        </div>
        
    </body>
</html>
