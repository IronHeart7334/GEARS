<!DOCTYPE html>
<html>
    <head>
        <title> GEARS </title>
        <meta name="Creator" content="Matt Crow">
        <script src="scripts/utilities.js"></script>
        <script src="scripts/level.js"></script>
        <script src="scripts/block.js"></script>
        <script src="scripts/jump.js"></script>
        <script src="scripts/machines.js"></script>
        <script src="scripts/player.js"></script>
        <script src="scripts/entity.js"></script>
        <style>
            div {
                border-style: groove;
                border-width: 10px;
            }
            #controls {
                position:absolute;
                left:1120px;
                top:220px;
                width:100px;
                height:880px;
                text-align: center;
            }
        </style>
        
        <script>
        	// Variable globalization
        	var base_canvas;
        	var canvas;
        	var game_timer;
        	var timer_started;
        	
        	// Variables
        	var FPS = 20;
        	var zoom_scale = 1;
        	var canvas_size = 700;
        	var BLOCK_SIZE = canvas_size / 10;
        	var GRAVITY = blocksPerSecond(3);
        	var camera_shift = [canvas_size / 2, canvas_size * 0.67];
        	
        	function blocksPerSecond(blocks){
        	    return BLOCK_SIZE * blocks / FPS;
        	}
        	
        	function load_page() {
            	var body = document.getElementById("body");
            	var fresh_canvas = document.createElement("canvas");
            	fresh_canvas.id = "canvas";
            	fresh_canvas.width = canvas_size;
            	fresh_canvas.height = canvas_size;
            	fresh_canvas.style.position = "absolute";
            	fresh_canvas.style.top = "0px";
            	fresh_canvas.style.left = "0px";
            	body.appendChild(fresh_canvas);
            	base_canvas = document.getElementById("canvas");
			    canvas = base_canvas.getContext("2d");
            }
        	
        	// Camera functions
        	function pause() {
        		clearInterval(game_timer);
        		timer_started = false;
        	}
        	
        	function resume() {
        		game_timer = setInterval(update_frame, 1000 / FPS);
        		timer_started = true;
        	}
        	
        	function update_camera() {
        		canvas.save();
        		var x_shift = -player.x + camera_shift[0];
        		var y_shift = -player.y + camera_shift[1];
				
				// left
        		if (x_shift > 0){
        			x_shift = 0;
        		}
        		
        		// right
        		if (x_shift < canvas_size - current_level.longest_row * BLOCK_SIZE) {
        			x_shift = canvas_size - current_level.longest_row * BLOCK_SIZE;
        		}
        		
        		// top
        		if (y_shift > 0){
        			y_shift = 0;
        		}
        		
        		// bottom
        		if (y_shift < canvas_size - current_level.height * BLOCK_SIZE){
        			y_shift = canvas_size - current_level.height * BLOCK_SIZE;
        		}
        		
        		canvas.translate(x_shift, y_shift);
        	}
        	
        	function reset_camera() {
        		canvas.restore();
        	}
        	
        		
        	
        	// Colors
        	// rename these        	
        	var color1 = "rgb(150, 50, 0)";
            var color2 = "rgb(35, 100, 0)";
            var color3 = "rgb(175, 175, 255)";
            var energy_color = "rgb(155, 255, 0)";
            
        	function silver(value) {
                if (value > 10) {
                    value = 10;
                }
                shade = value * 25;
                return "rgb(" + shade + ", " + shade + ", " + shade + ")";
            }
            
            function gold(value) {
                if (value > 10) {
                    value = 10;
                }
                shade = value * 25;
                return "rgb(" + shade + ", " + shade + ", " + 0 + ")";
            }
            
            var block_colors = [
            	[gold(4), color1],
            	[color1, color2],
            	[silver(8), color3],
            	[silver(4), silver(9)],
            	[silver(3), silver(4)],
            	[gold(4), gold(9)]
            ];

			function draw_gear(x, y, size, color, rotated){
				var gear1 = [
					[1, 0, 1, 0, 1],
					[0, 1, 1, 1, 0],
					[1, 1, 0, 1, 1],
					[0, 1, 1, 1, 0],
					[1, 0, 1, 0, 1]
				];
				
				var gear2 = [
					[0, 1, 0, 1, 0],
					[1, 1, 1, 1, 1],
					[0, 1, 0, 1, 0],
					[1, 1, 1, 1, 1],
					[0, 1, 0, 1, 0]
				];
				
				if (!rotated){
					var gear_map = gear1;
				}
				
				if (rotated){
					var gear_map = gear2;
				}
				
            	canvas.fillStyle = color;
				
				for (var row = 0; row < gear_map.length; row++) {
            			for (var column = 0; column < gear_map[row].length; column++){
            				if (gear_map[row][column] != 0){
            					canvas.fillRect(x + size * row, y + size * column, size, size);
            				}	
            			}
            		}
			}
            
			// Canvas functions
            function assign_color(changes) {
                for (var alter of changes) {
                    var change = document.getElementById(alter[0]);
                    change.style.background = alter[1];
                    change.style.borderColor = alter[2];     
                }
            }
            
            function load_game() {
            	//load_canvas();
            	current_level.load();
            	resume();
            }
            
            function keyDown(event){
                //console.log(event.key + " down");
                switch(event.key){
                    case 'a':
                        player.moveLeft();
                        break;
                    case 'd':
                        player.moveRight();
                        break;
                    case 'w':
                        player.jump();
                        break;
                    case 'Shift':
                        player.shiftGear();
                        break;
                    case 'p':
                        if (timer_started){
            				pause();
            			} else {resume();}
            			break;
                }
            }
            function keyUp(event){
                //console.log(event.key + " up");
                switch(event.key){
                    case 'a':
                        player.stop();
                        break;
                    case 'd':
                        player.stop();
                        break;
                }
            }
            
            document.addEventListener("keydown", keyDown);
            document.addEventListener("keyup", keyUp);
            
            function update_frame() {
            	canvas.fillStyle = color3;
            	canvas.fillRect(0, 0, canvas_size, canvas_size);
            	
            	update_camera();
            	
            	player.update();
            	current_level.update();
            	
            	current_level.draw();
            	player.draw();
            	
            	reset_camera();
            	
            	player.drawHUD();
            }
    
			var reg_jump = new Jump("Jump", 1.5, 1, color3);
            var far_jump = new Jump("Leap", 5, 0, color2);
            var high_jump = new Jump("Rocket", 0, 5, color1);
            
            // Temporary stuff
            var a1 = new Area(
                [MetalBlock, GoldBlock], 
                [
            		[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            		[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            		[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        			[1, 0, 0, 1, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
        			[1, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        			[1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
           			[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
           			[1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
           			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
           			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
           		],
           		[
            		new Gear(3, 5, reg_jump),
					new Gear(3, 2, far_jump),
					new Gear(19, 5, high_jump)
            	],
            	[1, 5],
            	[20, 2]
            );
            
            var a2 = new Area(
                [MetalBlock, GoldBlock], 
                [
                    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
                    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1],
                    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1],
                    [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                    [1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]
                ],
                [
                    new Tram(1, -1, [], true),
                    new Tram(10, 1, [[17, 1]], true),
                    new Tram(10, 12, [], true),
                    new Tram(11, 12, [], true),
                    new Tram(12, 12, [], true),
                    new Tram(13, 12, [], true),
                    new Tram(14, 12, [], true),
                    new Tram(15, 12, [], true),
                    new Tram(16, 12, [], true),
                    new Tram(18, 4, [[9, 4]], true),
                    new Belt(3, 6, 3, "right", 5, true),
                    new Belt(4, 9, 3, "left", 5, true)
                ],
                [0, 2],
                [19, 2]
            );
            
            var a3 = new Area(
                [MetalBlock, GoldBlock],
                [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [1, 1, 1, 1, 1, 1, 1, 1, 2, 0]
                ],
                [
                    new Door(9, 3)
                ],
                [0, 3],
                [8, 3]
            );
            
            var test_area = [
            	[
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 0, 0, 1, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[
            			new Gear(3, 5, reg_jump),
						new Gear(3, 2, far_jump),
						new Gear(19, 5, high_jump)
            		]
            	],
            	
            	[
            		[
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1],
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            			[1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1]
            		],
            		[
            			new Tram(1, -1, [], true),
            			new Tram(10, 1, [[17, 1]], true),
            			new Tram(10, 12, [], true),
            			new Tram(11, 12, [], true),
            			new Tram(12, 12, [], true),
            			new Tram(13, 12, [], true),
            			new Tram(14, 12, [], true),
            			new Tram(15, 12, [], true),
            			new Tram(16, 12, [], true),
            			new Tram(18, 4, [[9, 4]], true),
            			new Belt(3, 6, 3, "right", 5, true),
            			new Belt(4, 9, 3, "left", 5, true)
            		]
            	],
            	
            	[
            		[
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 2, 0]
            		],
            		[
            			new Door(9, 3)
            		]
            	]
            ];
            
            var mountain = [
            	[
            		[
            			[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[
            			new Gear(7, 6, far_jump)
            		]
            	],
            	
            	[
            		[
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            			[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
            		],
            		[]	
            	]
            ];
            
            var test_level = new Level("Test", [MetalBlock, GoldBlock], test_area, [0, 150, 200]);
            //var mountain_level = new Level("Mountain", [[silver(1), silver(2)], [], [], [], [], ["rgb(0, 100, 255)", "rgb(0, 100, 255)"]], mountain, [0, 300, 400]);
            
            var current_level = test_level;
            
            current_level = new Level2("Test2", [a1, a2, a3], 0, true);
            
            var player = new Player();
            //current_level.run();
            current_level.load();
            current_level.play(player);
        </script>
    </head>
    
    <body onload="load_page(), load_game()"; assign_color([['controls', silver(7), color2]]);"; id="body">
        <div id="controls">
        	<h2>Controls</h2>
        	
        	<h3>W</h3>
        	<p>Jump</p>
        	
        	<h3>Shift</h3>
        	<p>Change gears</p>
        	
        	<h3>A:</h3>
        	<p>Move left</p>
        	
        	<h3>D:</h3>
        	<p>Move right</p>
        	
        	<h3>P</h3>
        	<p>Pause/unpause</p>
        	<i>Bugged</i>
        </div>
        
    </body>
</html>
